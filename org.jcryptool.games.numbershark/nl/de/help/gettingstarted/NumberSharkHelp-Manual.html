<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//DE">

<html>
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	  <title>Anleitung</title>
</head>

<body>
<h1>Anleitung</h1>

<p>Das folgende Bild zeigt das Hauptfenster des Zahlenhaispiels. Es besteht aus der Toolbar mit den Optionen zum Spiel, dem Spielfeld, einer Übersicht über den Punktestand und einer Tabelle, in der sich detailierte Informationen über den Spielverlauf befinden.</p>

<img src="Manual_1.jpg"
	alt="Zahlenhai Hauptfenster mit Zahlenfeld Kontroll- und Auswahlbereich und Informationsbereich und -fenster" ></img>

<h2>1. Die Ansicht</h2>
<h3>1.1 Das Spielfeld</h3>
<p>Das Spielfeld besteht, je nach Spielfeldgröße (hier 190) aus Tabs mit jeweils maximal 40 Buttons, die die auswählbaren Zahlen darstellen.</p>
<p>Aktive, auswählbare Zahlen sind in blau dargestellt. Zahlen, die bereits gezogen wurden, sind grau  und können nicht mehr ausgewählt werden. <br>
Verweilt man mit der Maus über einer aktiven Zahl, öffnet sich ein Tooltip, der genauere Informationen über die Zahl liefert. So werden dort die noch aktiven Teiler der Zahl dargestellt und angezeigt, ob die Zahl selbst ein Teiler von einer Zahl des aktiven Spielfeldes ist.</p>
<h3><img src="Manual_2.jpg" width="843" height="320" alt="Spielfeld"></h3>

<h3>1.2 Die Toolbar</h3>

<img src="Manual_3.jpg"
	alt="Zahlenhai Knöpfe" ></img>

<ul>
  <li><strong>"Neues Spiel"</strong></li>
  
  <p>Durch einen Klick auf den Button &quot;Neues Spiel&quot; öffnet sich ein Dialogfenster und ein neues Spiel mit beliebiger Spielfeldgröße (1 bis 1024) kann erzeugen werden. Das aktive Spiel wird dabei  verworfen.</p>
  <p><img src="Manual_4.jpg" alt="Neues Spiel Dialog"></p>
  
  <li><strong>"Rückgängig"</strong></li>
  
  <p>Mit diesem Knopf lässt sich der letzte Zug Rückgängig machen. Es lassen sich schrittweise so auch alle Züge des Spieles rückgängig machen.</p>
  <li>"<strong>Wiederherstellen</strong>"</li>
  
  <p>Durch Klicken auf &quot;Wiederherstellen&quot; kannst ein Zug, der rückgängig gemacht <b></b>wurde wiederhergestellt werden.</p>
  <li><strong>"Haifutter"</strong></li>
  
  <p>Dieser Button deaktiviert alle Zahlen, die der Zahlenhai aufjedenfall bekommen wird. Dies sind Zahlen, die größer als die Hälfte der aktuellen Spieldfeldgröße sind und keinen aktiven Teiler mehr besitzen. Diese Zahlen bekommt in jedem Fall der Zahlenhai.</p>
  <li><strong>"Hinweis&quot;</strong></li>
  
  <p>Liefert einen Vorschlag, welche Zahl geschickt ist als nächstes auszuwählen. In manchen Spielsituationen kann kein Hinweis generiert werden.</p>
  <li><strong>&quot;Heuristische Strategien&quot;</strong></li>
  <p>In diesem Wizard können mit diversen heuristischen Algorithmen Zugfolgen generiert werden, die zum Gewinn führen. Mehr dazu unter &quot;2. Heuristische Strategien&quot;.</p>
  <li><strong>&quot;Optimale Strategien&quot;</strong></li>
  <p>Öffnet einen Wizard, indem Zugfolgen mit maximalem Punktegewinn berechnet und angezeigt werden können. Genaueres dazu ist unter Punkt &quot;3. Optimale Strategien&quot; aufgeführt.</p>
  <li><strong>&quot;Hilfe&quot;</strong></li>
  <p>Öffnet die Hilfe.</p>
</ul>
<h3>1.3 Die Punkteübersicht</h3>
<ul>
<li><strong>"Spielstand"</strong></li>

<p>In der Gruppierung Spielstand werden die aktuellen Punkte des Spielers und des Zahlenhais angezeigt, dabei signifiziert die Farbe der Zahl, wer bei dem aktuellen Stand gewinnt. Ist der Punktestand beim Spieler in grün, liegt der Spieler vorne, ist sie hingegen rot gefärbt, liegt der Zahlenhai vorne. <br>
  Die Zahl neben &quot;Minimale Punkte zum Sieg&quot; ist die mindestens zu erreichende Zahl an Punkten, um das Spiel zu gewinnen.</p>
<li><strong>"Spielverlaufstabelle"</strong></li>
<p>In der Spielverlaufstabelle werden Details über den  Ablauf des Spieles angezeigt. Dort wird für jeden Zug dargestellt, welche Zahl der Spieler gezogen hat, wieviele Punkte er hatte, sowie die Zahlen, die er an den Zahlenhai im entsprechenden Zug verloren hat. Außerdem lassen sich die Punkte des Zahlenhais in jedem Zug und die Anzahl der aktiven Zahlen in jedem Zug ablesen.</p>
<p>&nbsp;</p>
</ul>


<h2 id = "heuStrat">2. Die heuristischen Strategien</h2>
<p>Hat man das Spiel Zahlenhai ein wenig gespielt, hat man ggfs. bereits seine eigene erste Strategie entwickelt, wie man  den Zahlenhai schlagen kann. Genau für diesen Zweck gibt es den Wizard zur Berechnung heuristischer Strategien. Dieser Wizard hat ein paar Strategien, die Gewinnzugfolgen liefern implementiert.</p>
<h3>2.1 Der Wizard heuristischer Straegien </h3>
<p>Durch einen Klick auf das halb ausgefüllt Stern-Icon in der Toolbar ( <img src="Manual_heuStrat.jpg">) erscheint der Wizard zur Berechnung heuristischer Strategien. Derzeit sind drei Strategien implementiert, die (verschiedene) Zugfolgen anhand verschiedener Kriterien berechnen. Dazu dienen die drei Radiobuttons. Die  unteren beiden Regler  definieren den Bereich der Spielfeldgrößen, für die die Strategien berechnet werden.</p>
<ul>
  <li><strong>"Maximiere die zu gewinnende Punktzahl in jedem Schritt."</strong></li>
  <p>Diese Strategie sucht in jedem Schritt diejenige Zahl, die den meisten Gewinn bringt. Das ist die Zahl, bei der die Differenz der Summe der aktiven Zahlen (die Zahlen, die der Zahlenhai bekommt) und der Zahl selbst (diese Zahl bekommt der Spieler) maximal wird. Gibt es mehrere mit gleichem Maximalwert wird die größte dieser Zahlen gewählt. </p>

  <li><strong>"Heuristische Strategie nach van Nek"</strong></li>
  <p>Diese Strategie ist angelehnt an den Algorithmus, der benutzt wird um optimale Zugfolgen zu berechnen (siehe 3. Die optimalen Strategien).<br>
    Er besteht aus folgenden fünf Schritten:<br>
    <br>
    Es sei N im folgenden die Spielfeldgröße.<br>
    <br>
   1. Schritt: Nehme die größte Zahl aus dem Intervall N/2 + 1 bis N mit genau einem Teiler.<br>
  2. Schritt: Solange noch eine Zahl, die den Eigenschaften aus Schritt 1 genügt, existiert, gehe zurück zu Schritt 1.<br>
  2. Schritt: Erzeuge eine Liste von Zahlen mit den Eigenschaften:<br>
  - Alle Zahlen, mit der kleinsten Anzahl an aktiven Teiler die größer sind als N/2 + 1 <br>
  - Die größte Zahl, die genau einen aktiven Teiler hat und kleiner als N/2 +1 ist<br>
  3.
   Schritt: Aus dieser erzeugten Liste wähle zufällig eine Zahl als nächsten Spielzug.
  <br>
  4.
  Schritt: Solange noch Zahlen mit aktiven Teilern vorhanden sind, gehe zurück zu Schritt 1. </p></ul>
<ul>
  <li><strong>"Heuristische Strategie von Schu (Version 1)"<br>
  </strong><br>
  Es sei N im folgenden die Spielfeldgröße.</li>
    <p>1. Schritt: Berechne zufällig eine Schranke aus dem Intervall 1 bis N/2 + 1<br>
      2. Schritt: Speichere die größte aktive Zahl mit den wenigsten aktiven Teilern aus dem Bereich N bis zur in Schritt 1 erzeugten Schranke.<br>
    3. Schritt: Berechne zufällig eine  zweite Schranke aus dem Intervall N/2 + 1 bis N<br>
    4. Schritt: 
    Finde die größte Pseudoprimzahl (Eine Zahl, die aufgrund der aktuellen Spielsituation nur einen Teiler hat) aus dem Intervall von der in Schritt 3 berechneten Schranke bis N<br>
    5. Schritt: Als aktuellen Zug wähle eine der in Schritt 2 oder Schritt 4 berechnete Zahl.<br>
    6. Schritt: Gehe zurück zu Schritt 1, solange noch aktive freie Zahlen vorhanden sind.</p>
</ul>
<p>Nähere Informationen und eine Diskussion der Strategien findet sich hier (nur in englisch): <br>
<a href="../reference/NumberSharkHelp-Discussion.html">Discussion of good and optimal strategies for the Number Shark game</a></li>
<br>
<br>
Klickt man auf &quot;Okay&quot; werden die Zugfolgen mit dem ausgewählten Algorithmus und den eingestellten Grenzen berechnet. Dies kann je nach Leistung des Computers und den eingestellten Spielfeldgrößen einen Moment dauern. <br>
Dann erscheint das Ergebnis-Fenster. Dort sieht man, sortiert nach der Spielfeldgröße, welche Punktzahl erreicht werden kann, wieviele Punkte der Hai bekommt und die zugehörige Zugfolge. Wählt man eine Zeile aus und klickt auf &quot;Auswahl spielen...&quot; wird das ausgewählte Spiel mit den berechneten Zügen im Zahlenhaihauptfenster gespielt.<br>
Mit &quot;Speichern unter...&quot; lässt sich die Tabelle als .csv-Datei exportieren und z.B. in Excel einlesen.</p>
<p><img src="Manual_5.jpg" alt="" width="650" height="510" /></p>
<p>&nbsp;</p>
<h2 id = "optStrat">3. Die optimalen Strategien</h2>

<p>Früher oder später wird dann das Gewinnen nicht mehr das Problem sein und man fragt sich, ob es denn auch eine optimale Strategie - also eine Strategie mit der man bei jeder Spielfeldgröße die höchstmögliche Punktzahl erreicht - gibt und wie diese aussehen könnte.  (Hinweis: Die Strategien sind nicht eindeutig, es gibt durchaus mehrere Reihenfolgen, in denen die Zahlen gezogen werden könnnen, aber dennoch die maximale Punktzahl erreicht wird.)</p>
<p>Bisher ist es uns noch nicht gelungen, eine solche Strategie konkret zu entwickeln. Bis zu einem gewissen Punkt ist es uns klar, welche Zahlen gezogen werden müssen. (Wie z.B. als ersten Zug muss die größte Primzahl gezogen werden.) Anschließend gibt es aber mehrere Möglichkeiten, die man gehen kann. Mit einem Algorithmus von van Nek ist es uns aber gelungen diese Verzweigungen in geschickter Weise auszuprobieren und unnötige Wege zu verwerfen, sodass wir am Ende eine optimale Zugfolge angeben konnten. Diese Zugfolgen (bis n = 400) lassen sich im Wizard zur Berechnung optimaler Strategien anzeigen und sogar neuberechnen. Ein Blick in den Wizard lohnt sich, vielleicht gelingt es dir ja eine Strategie zu entwickeln, die immer die optimale Punktzahl liefert?</p>
<h3>3.1 Der Wizard optimaler Strategien </h3>
<p>Durch einen Klick auf das (komplett ausgefüllte) Stern-Icon <img src="Manual_optStrat.jpg" alt=""/> in der Toolbar erscheint der Wizard zum Finden optimaler Strategien. Dort gibt es folgende Auswahlmöglichkeiten:</p>
<ul>
  <li><strong>"Vorberechnete optimale Strategien anzeigen (für den Zahlenvorrat 2-250)"</strong></li>
  <p>Zeigt die optimalen, bereits vorberechneten Strategien an. Für die Spielfeldgrößen von 2 bis 250 sind hier die Werte eingetragen und lassen sich analysieren.</p>
  <li><strong>"Optimale Strategien mit dem Algorithmus von van Nek berechnen"</strong></li>
  <p>Wählt man diese Option, so lassen sich die Zugfolgen mit dem Backtracking-Algorithmus von van Nek neu berechnen. 
  Man kann zusätzlich noch den Bereich festlegen, für welche Spielfeldgrößen die optimalen Zugfolgen berechnet werden sollen. <br>
  Hinweis:
  Die Laufzeit des Algorithmus ist exponentiell, daher kann es - je nach eingestellten Spielfeldgrößen - sehr lange dauern.<br>
  <br>
  Hier eine (vereinfachte) Beschreibung des Algorithmus, es sei hierbei N die Spielfeldgröße:<br>
  <br>
  1. Schritt: Nehme die größte Zahl aus dem Intervall N/2 + 1 bis N mit genau einem Teiler.<br>
  2. Schritt: Solange noch eine Zahl, die den Eigenschaften aus Schritt 1 genügt, existiert, gehe zurück zu Schritt 1.<br>
  3. Schritt: Für jede verbleibende Zahl bilde ein neues Teilproblem, indem diese Zahl ausgewählt wird und als mögliche Zugfolge betrachtet wird<br>
  4. Schritt: 
  Sind noch freie Zahlen verfügbar sind, gehe zurück zu Schritt 1, andernfalls speichere das Ergebnis als neue (momentane) optimale Zugfolge, sofern die aktuelle Zugfolgenpunktzahlen größer als der Optimalwert ist.<br>
  5. Schritt: Betrachte ein anderes noch nicht ausgewertetes Teilproblem.

  <br>
  <br>
  Diese Beschreibung des Algorithmus liefert nur die grundsätzliche Idee. In der Implementierung von van Nek sind noch einige  Abfragen eingebaut, sodass manche Teilprobleme gar nicht bis zu Ende ausgewertet werden müssen. So wird z. B. überprüft, ob mit dem aktuellen Spielstand, also den verbleibenden Zahlen und der bisher erreichten Punktzahl, der Optimalwert übertroffen werden kann.  </ul>
  Klickt man auf &quot;Okay&quot; werden die Zugfolgen mit den eingestellten Grenzen berechnet oder eben die vorberechneten Ergebnisse angezeigt. <br>
Dann erscheint das Ergebnis-Fenster. Dort sieht man, sortiert nach der Spielfeldgröße, welche maximale Punktzahl erreicht werden kann, wieviele Punkte der Hai bekommt und die zugehörige Zugfolge. Wählt man eine Zeile aus und klickt auf &quot;Auswahl spielen...&quot; wird das ausgewählte Spiel mit den berechneten Zügen im Zahlenhaihauptfenster gespielt.<br>
Mit &quot;Speichern unter...&quot; lässt sich die Tabelle als .csv-Datei exportieren und z.B. in Excel einlesen.  
  <p><img src="Manual_6.jpg" alt="" width="650" height="510" /></p>
  <p>

</body>
</html>